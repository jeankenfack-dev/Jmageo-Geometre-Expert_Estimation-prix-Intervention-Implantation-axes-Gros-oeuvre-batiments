(function(){const _0x1f3a=['getElementById','adresse','value','type','n','resultat','innerHTML','Calcul\x20en\x20cours...','https://nominatim.openstreetmap.org/search?format=json&q=','&countrycodes=fr','Erreur\x20lors\x20de\x20la\x20localisation\x20du\x20chantier.'];const _0x4b21=function(_0x1f3a,_0x4b21){_0x1f3a=_0x1f3a-0x0;let _0x2d9b=_0x1f3a[_0x1f3a];return _0x2d9b;};const JM_LAT=48.5701,JM_LON=2.6324;function hv(_0x1,_0x2,_0x3,_0x4){const R=6371;const dLat=(_0x3-_0x1)*Math.PI/180;const dLon=(_0x4-_0x2)*Math.PI/180;const a=Math.sin(dLat/2)**2+Math.cos(_0x1*Math.PI/180)*Math.cos(_0x3*Math.PI/180)*Math.sin(dLon/2)**2;return 2*R*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));}async function gc(a){const r=await fetch(_0x1f3a[8]+encodeURIComponent(a)+_0x1f3a[9]);const d=await r.json();if(!d.length)throw 0;return{lat:parseFloat(d[0].lat),lon:parseFloat(d[0].lon)}}window.calculer=async function(){const a=document[_0x1f3a[0]](_0x1f3a[1])[_0x1f3a[2]];const t=document[_0x1f3a[0]](_0x1f3a[3])[_0x1f3a[2]];const n=parseInt(document[_0x1f3a[0]](_0x1f3a[4])[_0x1f3a[2]]);const r=document[_0x1f3a[0]](_0x1f3a[5]);if(!a||n<=0){r[_0x1f3a[6]]='Veuillez\x20saisir\x20une\x20adresse\x20valide.';return}r[_0x1f3a[6]]=_0x1f3a[7];try{const c=await gc(a);const d=hv(JM_LAT,JM_LON,c.lat,c.lon)*1.25;let p=0;if(t==='A'){p=n<=2?800+3*d+200*n:1000+3*d+200*n}else{p=n<=2?500+3*d+100*n:800+3*d+110*n}r[_0x1f3a[6]]='Distance\x20estimée\x20:\x20<strong>'+d.toFixed(1)+'\x20km</strong><br>Prix\x20estimatif\x20:\x20<strong>'+p.toFixed(0)+'\x20€\x20HT</strong>'}catch(e){r[_0x1f3a[6]]=_0x1f3a[10]}}})();
