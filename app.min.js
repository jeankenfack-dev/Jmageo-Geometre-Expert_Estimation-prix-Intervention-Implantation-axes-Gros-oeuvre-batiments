(function(){const _0x5c2a=['getElementById','adresse','value','type','n','resultat','innerHTML','Calcul en cours...','https://nominatim.openstreetmap.org/search?format=json&q=','&countrycodes=fr','Veuillez saisir une adresse valide.','Erreur lors de la localisation du chantier.'];const JM_LAT=48.5701,JM_LON=2.6324;function _0x3e1f(a,b,c,d){const R=6371;const dLat=(c-a)*Math.PI/180;const dLon=(d-b)*Math.PI/180;const h=Math.sin(dLat/2)**2+Math.cos(a*Math.PI/180)*Math.cos(c*Math.PI/180)*Math.sin(dLon/2)**2;return 2*R*Math.atan2(Math.sqrt(h),Math.sqrt(1-h));}async function _0x2b9e(a){const r=await fetch(_0x5c2a[8]+encodeURIComponent(a)+_0x5c2a[9]);const j=await r.json();if(!j.length)throw 0;return{lat:parseFloat(j[0].lat),lon:parseFloat(j[0].lon)}}window.calculer=async function(){const a=document[_0x5c2a[0]](_0x5c2a[1])[_0x5c2a[2]];const t=document[_0x5c2a[0]](_0x5c2a[3])[_0x5c2a[2]];const n=parseInt(document[_0x5c2a[0]](_0x5c2a[4])[_0x5c2a[2]]);const r=document[_0x5c2a[0]](_0x5c2a[5]);if(!a||n<=0){r[_0x5c2a[6]]=_0x5c2a[10];return}r[_0x5c2a[6]]=_0x5c2a[7];try{const c=await _0x2b9e(a);const km=_0x3e1f(JM_LAT,JM_LON,c.lat,c.lon)*1.3;let p=0;if(t==='A'){p=n<=2?800+3*km+200*n:1000+3*km+200*n}else{p=n<=2?500+3*km+100*n:800+3*km+110*n}r[_0x5c2a[6]]='Distance estimée : <strong>'+km.toFixed(1)+' km</strong><br>Prix estimatif : <strong>'+p.toFixed(0)+' € HT</strong>'}catch(e){r[_0x5c2a[6]]=_0x5c2a[11]}}})();
